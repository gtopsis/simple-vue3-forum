import{d as S,r as k,s as p,n as E,c as i,a as n,o as f,b as v,w as t,e,T as N,f as m,t as h,g as A,j as d,p as j,i as R,k as D,q as M,v as O,_ as $}from"./index-ca8dec90.js";import{u as q,_ as L}from"./PostsListing.vue_vue_type_script_setup_true_lang-38e7a02b.js";const U={class:"posts-counter text-white text-right"},z={class:"text-white"},F=S({__name:"ThreadView",props:{forumId:{},threadId:{}},setup(g){const w=g,T=M(()=>O(()=>import("./PostEditorModal-d07d9b2b.js"),["assets/PostEditorModal-d07d9b2b.js","assets/index-ca8dec90.js","assets/index-90e09854.css","assets/PostEditorModal-b94aae1c.css"])),_=q();let s=k(!1);const{getThreadById:y}=p(E()),c=i(()=>y.value(w.threadId)),{getPostsByThreadId:I}=p(_),x=i(()=>I.value(c.value.id)),b=u=>{var a;_.addPost({...u,threadId:(a=c.value)==null?void 0:a.id,userId:D().getAuthUserId}),s.value=!1},C=()=>{s.value=!0};return(u,a)=>{const r=n("v-col"),P=n("v-spacer"),l=n("v-row"),V=n("v-btn"),B=n("v-container");return f(),v(B,{class:"mt-3 pa-1 mb-4"},{default:t(()=>[e(l,{class:"","no-gutters":""},{default:t(()=>[e(r,{cols:"auto"},{default:t(()=>[e(N)]),_:1}),e(P),e(r,{cols:"auto","align-self":"center"},{default:t(()=>{var o;return[m("span",U,h((o=c.value)==null?void 0:o.posts.length)+" posts",1)]}),_:1})]),_:1}),e(l,{class:"my-2",justify:"space-between"},{default:t(()=>[e(r,{cols:"auto"},{default:t(()=>{var o;return[m("h2",z,h((o=c.value)==null?void 0:o.title),1)]}),_:1}),e(r,{cols:"auto"},{default:t(()=>[e(V,{color:"primary",onClick:C},{default:t(()=>[A(" Create new post ")]),_:1})]),_:1})]),_:1}),e(l,{justify:"center"}),e(L,{posts:x.value},null,8,["posts"]),d(s)?(f(),v(d(T),{key:0,dialogEnabled:d(s),onSavePost:b,onCancel:a[0]||(a[0]=o=>j(s)?s.value=!1:s=!1)},null,8,["dialogEnabled"])):R("",!0)]),_:1})}}});const J=$(F,[["__scopeId","data-v-cd5cf709"]]);export{J as default};
